---

copyright:
  years: 2017, 2019
lastupdated: "2019-04-04"

keywords: authentication, authorization, identity, app security, secure, directory, registry, passwords, languages, lockout

subcollection: appid

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:pre: .pre}
{:table: .aria-labeledby="caption"}
{:codeblock: .codeblock}
{:tip: .tip}
{:note: .note}
{:important: .important}
{:deprecated: .deprecated}
{:download: .download}

# パスワード・ポリシーの定義
{: #cd-strength}

Cloud Directory で使用可能なパスワードの要件を設定できます。
ユーザーが従わなければならない特定の要件を定義することによって、より保護されたアプリケーションにすることができます。
{: shortdesc}

## ポリシー: パスワード・ストレングス
{: #cd-password-strength}

強力なパスワードを使用すると、他人がそのパスワードを手動または自動化された方法で推測することが困難または不可能になります。 ユーザー・パスワードの強度の要件を設定するには、以下の手順を使用します。
{: shortdesc}

1. App ID ダッシュボードの**「パスワード・ポリシー (Password Policies)」**タブにナビゲートします。

2. **「パスワード・ストレングスの定義 (Define password strength)」**ボックスで、**「編集」**をクリックします。画面が表示されます。

3. **「パスワード・ストレングス (Password strength)」**ボックスに、有効な正規表現ストリングを入力します。

  例:
    - 少なくとも 8 文字でなければなりません。 正規表現の例: `^.{8,}$`
    - 1 つの数字、1 つの小文字、および 1 つの大文字が含まれている必要があります。 正規表現の例: `^(?:(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*)$`
    - 英字と数字だけが含まれている必要があります。 正規表現の例: `^[A-Za-z0-9]*$`
    - 少なくとも 1 固有文字でなければなりません。 正規表現の例: `^(\w)\w*?(?!\1)\w+$`

4. **「保存」**をクリックします。

パスワード・ストレングスは、{{site.data.keyword.appid_short_notm}} コンソールのクラウド・ディレクトリー設定ページで、または<a href="https://us-south.appid.cloud.ibm.com/swagger-ui/#/Management%20API%20-%20Config/mgmt.set_cloud_directory_password_regex" target="_blank">管理 API <img src="../../icons/launch-glyph.svg" alt="外部リンク・アイコン"></a> を使用して設定できます。
{: note}


## 拡張パスワード・ポリシー
{: #cd-advanced-password}


追加のパスワード制約を施行することで、アプリケーションのセキュリティーを強化できます。
{: shortdesc}


以下の 5 つのフィーチャーの任意の組み合わせから成る拡張パスワード・ポリシーを作成できます。

 - 間違った資格情報が繰り返し入力された後のロックアウト (Lockout after repeated wrong credentials)
 - パスワード再利用を避ける
 - パスワード有効期限
 - パスワード変更間隔の最短期間 (Minimum period between password changes)
 - パスワードにユーザー名が含まれないことの確認 (Ensure password does not include username)


 このフィーチャーを有効にすると、拡張セキュリティー機能の追加請求が発生します。 詳しくは、[{{site.data.keyword.appid_short_notm}} の料金はどのように計算しますか?](/docs/services/appid?topic=appid-faq#faq-pricing) を参照してください。
 {: important}


### ポリシー: パスワード再利用を避ける
{: #cd-avoid-reuse}

ユーザーがパスワードを変更するときに、最近使用されたパスワードを選択できないようにすることができます。
{: shortdesc}

GUI または API を使用して、ユーザーが 1 度使用したパスワードを再利用する場合、その前に何回他のパスワードを使用する必要があるかを選択できます。 1 から 10 までの範囲の任意の整数値を選択できます。

このオプションをオンにした場合、ユーザーは最近使用したパスワードを使用できません。最近使用したパスワードにパスワードを設定しようとすると、デフォルトのログイン・ウィジェット GUI にエラーが表示され、別のパスワードの入力を求めるプロンプトが出されます。

以前のパスワードは、ユーザーの現在のパスワードと同じ保管方法で安全に保管されます。
{: note}


### ポリシー: 間違った資格情報が繰り返し入力された後のロックアウト
{: #cd-lockout}

疑わしい動作 (誤ったパスワードによる連続した複数回のサインイン試行など) が検出されたときに、サインインする機能を一時的にブロックすることで、ユーザーのアカウントを保護できます。 この手段は、悪意のあるパーティーがユーザーのパスワードを推測してユーザーのアカウントにアクセスすることを防ぐのに役立ちます。
{: shortdesc}

GUI または API を使用して、ユーザーによるサインイン試行の失敗が許容される回数を設定できます。この最大回数を超えるとアカウントが一時的にロックされます。 さらに、アカウントをロックする時間の長さも設定できます。 以下のオプションがあります。

* 試行回数 (Number of attempts): 1 から 10 までの整数。
* ロックアウト期間 (Lockout period): 1 分から 1440 分 (24 時間) までの範囲の分単位で指定される任意の整数値。

アカウントがロックされると、ユーザーは、指定されたロックアウト期間が経過するまで、サインインしたり他のセルフサービス操作 (パスワードの変更など) を実行したりできません。 ロックアウト期間が終了すると、ユーザーは自動的にアンロックされます。

ロックアウト期間が終了する前に、ユーザーをアンロックすることもできます。 ユーザーがロックアウトされているかどうかを確認するには、`active` フィールドが `false` に設定されているかどうかを確認します。 また、サービス・ダッシュボードの**「ユーザー」**タブで、ユーザーの状況が `disabled` に設定されているかどうかを確認することもできます。 ユーザーをアンロックするには、[API](https://us-south.appid.cloud.ibm.com/swagger-ui/#/Cloud_Directory_Users/updateCloudDirectoryUser) を使用して `active` フィールドを `true` に設定する必要があります。


### ポリシー: パスワード変更間隔の最短期間
{: #cd-minimum-time}

ユーザーが次にパスワードを変更するまでに必要な最小待機時間を設定すると、ユーザーがすぐにパスワードを切り替えてしまうことを防止できます。
{: shortdesc}

このフィーチャーは、「パスワード再利用を避ける」ポリシーと併用すると特に有用です。この制限がない場合、ユーザーがパスワードを短時間に何度も連続して変更することで、最近使用したパスワードの再利用に関して制限を課す意味がなくなってしまいます。 1 時間から 30 日までの値を選択できます (時間単位で指定)。


### ポリシー: パスワード有効期限
{: #cd-expiration}

セキュリティー上の理由から、一定期間後にユーザーにパスワードを変更してもらうように、パスワード・ローテーション・ポリシーを適用することもできます。
{: shortdesc}

GUI または API を使用して、ユーザーのパスワードを有効にしておく期間を設定できます。 パスワード有効期限が切れると、ユーザーは次回のサインイン時に、パスワードを再設定するよう強制されます。 1 から 90 までの日数を選択できます。

用意されているデフォルトの GUI を使用することで、ログイン・ウィジェットをすぐに開始できます。ユーザーは、サインインの完了前に、新規パスワードを入力するよう指示されます。

カスタムのサインイン操作環境を使用している場合、ユーザーが期限切れパスワードを使用してサインインしようとすると、エラーがトリガーされます。 それで、必要なユーザー・エクスペリエンスが提供されるように、アプリケーションを構成しておく必要があります。 新規パスワードの設定のためにパスワード変更 API を呼び出すことができます。

トークン・エンドポイント応答は、以下のようになります。

```javascript
{
  "error" : "invalid_grant",
  "error_description" : "Password expired",
  "user_id" : "356e065e-49da-45f6-afa3-091a7b464f51"
}
```
{: screen}

このオプションを初めてオンに設定すると、既存のユーザー・パスワードに有効期限は設定されません。 ユーザーのパスワードが変更された時点から、そのパスワードの有効期限が開始します。 このフィーチャーをオンに設定した場合、パスワードを更新するようユーザーに促すことを検討できます。
{: note}


### ポリシー: パスワードにユーザー名が含まれないことの確認
{: #cd-no-username}

パスワードをより強力にするため、ユーザーがユーザー名を含めたり E メール・アドレスの最初の部分を含めたりしないようにすることができます。
{: shortdesc}

この制約では大/小文字の区別がありません。つまり、ユーザーは一部またはすべての文字の大/小文字を変更して個人情報を使用することができません。 このオプションを構成するには、該当のスイッチを**オン**に切り替えます。

